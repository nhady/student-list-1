node{
  def app
  
  stage('Clone') {
    checkout scm
  }
  
  stage('Build image') {
    app = docker.build("my_image", "./simple_api/")
  }
  
  stage('Test image') {
    docker.image('my_image').withRun('-p 8080:80')
  }
}
